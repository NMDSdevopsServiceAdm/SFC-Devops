==================================================================================================
Starting SFCADMIN on 30/06/2020 at 16:03:45.82
----------------------------------------------
 
==================================================================================================
16:04:13.01: PREPROD MENU: A selected to run all options....
-----------------------------------------
16:04:15.20: Do npm install and run build
-----------------------------------------
GIT status:
On branch live
Your branch is up to date with 'origin/live'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   manifest.bluegreen.yml

no changes added to commit (use "git add" and/or "git commit -a")
16:04:21.26: npm install and run build abandoned - current Branch is not clean
==================================================================================================
16:06:18.65: PREPROD MENU: A selected to run all options....
-----------------------------------------
16:06:20.19: Do npm install and run build
-----------------------------------------
GIT status:
On branch live
Your branch is up to date with 'origin/live'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   manifest.bluegreen.yml

no changes added to commit (use "git add" and/or "git commit -a")
16:06:26.26: npm install and run build proceeding but current Branch is not clean
^C^CTerminate batch job (Y/N)? 
^CTerminate batch job (Y/N)? ==================================================================================================
Starting SFCADMIN on 30/06/2020 at 16:07:48.28
----------------------------------------------
 
==================================================================================================
16:08:12.84: PREPROD MENU: A selected to run all options....
-----------------------------------------
16:08:14.20: Do npm install and run build
-----------------------------------------
GIT status:
On branch live
Your branch is up to date with 'origin/live'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   manifest.bluegreen.yml

no changes added to commit (use "git add" and/or "git commit -a")
16:08:18.89: npm install and run build proceeding but current Branch is not clean
npm WARN rm not removing C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\.bin\karma.ps1 as it wasn't installed by C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\karma
npm WARN rm not removing C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\.bin\karma.cmd as it wasn't installed by C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\karma
npm WARN rm not removing C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\.bin\karma as it wasn't installed by C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\karma

> core-js@3.6.4 postinstall C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\@angular-devkit\build-angular\node_modules\core-js
> node -e "try{require('./postinstall')}catch(e){}"

[96mThank you for using core-js ([94m https://github.com/zloirock/core-js [96m) for polyfilling JavaScript standard library![0m

[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: [0m
[96m>[94m https://opencollective.com/core-js [0m
[96m>[94m https://www.patreon.com/zloirock [0m

[96mAlso, the author of core-js ([94m https://github.com/zloirock [96m) is looking for a good job -)[0m


> @angular/cli@9.1.9 postinstall C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\@angular\cli
> node ./bin/postinstall/script.js


> nodemon@2.0.4 postinstall C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\node_modules\nodemon
> node bin/postinstall || exit 0

[32mLove nodemon? You can now support the project via the open collective:[22m[39m
 > [96m[1mhttps://opencollective.com/nodemon/donate[0m

npm WARN @testing-library/angular@8.2.0 requires a peer of @angular/common@^8.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @testing-library/angular@8.2.0 requires a peer of @angular/platform-browser@^8.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @testing-library/angular@8.2.0 requires a peer of @angular/animations@^8.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @testing-library/angular@8.2.0 requires a peer of @angular/router@^8.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @testing-library/angular@8.2.0 requires a peer of @angular/core@^8.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN angulartics2@7.5.2 requires a peer of @angular/common@>=6.0.0 <9.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN angulartics2@7.5.2 requires a peer of @angular/core@>=6.0.0 <9.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules\webpack-dev-server\node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules\watchpack-chokidar2\node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules\fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"win32","arch":"x64"})

added 885 packages from 284 contributors, removed 195 packages, updated 682 packages and audited 2808 packages in 123.774s

62 packages are looking for funding
  run `npm fund` for details

found 4 low severity vulnerabilities
  run `npm audit fix` to fix them, or `npm audit` for details

> ng-sfc-v2@0.0.1 build:prod C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment
> npm run build:clean && ng build --extract-css --prod


> ng-sfc-v2@0.0.1 build:clean C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment
> rimraf dist

Compiling @angular/core : module as esm5
Compiling @angular/animations : module as esm5
Compiling @angular/cdk/keycodes : module as esm5
Compiling @angular/compiler/testing : module as esm5
Compiling @angular/cdk/coercion : module as esm5
Compiling @angular/cdk/collections : module as esm5
Compiling @angular/animations/browser : module as esm5
Compiling @angular/common : module as esm5
Compiling @angular/core/testing : module as esm5
Compiling @angular/cdk/portal : module as esm5
Compiling @angular/cdk : module as esm5
Compiling angulartics2/ga-enhanced-ecom : module as esm5
Compiling @angular/cdk/observers : module as esm5
Compiling @angular/router : module as esm5
Compiling @angular/cdk/platform : module as esm5
Compiling @angular/platform-browser : module as esm5
Compiling @angular/cdk/bidi : module as esm5
Compiling @angular/common/http : module as esm5
Compiling @angular/common/testing : module as esm5
Compiling @angular/animations/browser/testing : module as esm5
Compiling @angular/cdk/accordion : module as esm5
Compiling @angular/cdk/a11y : module as esm5
Compiling angulartics2 : module as esm5
Compiling @angular/platform-browser-dynamic : module as esm5
Compiling @angular/cdk/scrolling : module as esm5
Compiling @angular/platform-browser/testing : module as esm5
Compiling @angular/platform-browser/animations : module as esm5
Compiling @angular/router/testing : module as esm5
Compiling @angular/cdk/layout : module as esm5
Compiling @angular/cdk/table : module as esm5
Compiling @angular/cdk/stepper : module as esm5
Compiling @angular/cdk/text-field : module as esm5
Compiling @angular/cdk/drag-drop : module as esm5
Compiling @angular/cdk/overlay : module as esm5
Compiling @angular/cdk/tree : module as esm5
Compiling @angular/common/http/testing : module as esm5
Compiling @angular/forms : module as esm5
Compiling @angular/platform-browser-dynamic/testing : module as esm5
Compiling @auth0/angular-jwt : module as esm5
Compiling @testing-library/angular : module as esm5
Compiling angulartics2/adobeanalytics : module as esm5
Compiling angulartics2/amplitude : module as esm5
Compiling angulartics2/appinsights : module as esm5
Compiling angulartics2/baidu : module as esm5
Compiling angulartics2/clicky : module as esm5
Compiling angulartics2/facebook : module as esm5
Compiling angulartics2/ga : module as esm5
Compiling angulartics2/gosquared : module as esm5
Compiling angulartics2/gst : module as esm5
Compiling angulartics2/gtm : module as esm5
Compiling angulartics2/hubspot : module as esm5
Compiling angulartics2/ibm-digital-analytics : module as esm5
Compiling angulartics2/intercom : module as esm5
Compiling angulartics2/kissmetrics : module as esm5
Compiling angulartics2/launch : module as esm5
Compiling angulartics2/mixpanel : module as esm5
Compiling angulartics2/piwik : module as esm5
Compiling angulartics2/routerlessmodule : module as esm5
Compiling angulartics2/segment : module as esm5
Compiling angulartics2/splunk : module as esm5
Compiling angulartics2/woopra : module as esm5
Compiling ngx-moment : module as esm5

chunk {} common.bc534afdf01ddfccb1d7.js (common) 14 kB  [rendered]
chunk {1} 1.a930d30538ea7f687c3e.js () 39.7 kB  [rendered]
chunk {2} runtime.b9b3ddc07e6fd16cd200.js (runtime) 2.56 kB [entry] [rendered]
chunk {3} 3.15f6adb1957e52f6b97d.js () 22.2 kB  [rendered]
chunk {4} 4.e9717e4e4c15f34f0a2d.js () 234 kB  [rendered]
chunk {5} main.82760896da3599c8b750.js (main) 1.38 MB [initial] [rendered]
chunk {6} polyfills.02430b3e14d8d0d69bc3.js (polyfills) 104 kB [initial] [rendered]
chunk {7} polyfills-es5.ed1719be34efaddfef6f.js (polyfills-es5) 187 kB [initial] [rendered]
chunk {8} styles.72004390dea3c5df7cff.css (styles) 116 kB [initial] [rendered]
chunk {9} 9.8531ef5f49edc817f30a.js () 27.1 kB  [rendered]
chunk {10} 10.ec6d6cab783250fc342e.js () 173 kB  [rendered]
chunk {11} 11.b99e8d6169af6655a728.js () 23.4 kB  [rendered]
chunk {12} 12.b1e4dc23e45bb6128166.js () 26.7 kB  [rendered]
chunk {13} 13.3f7cd4e895f6126247cc.js () 57.8 kB  [rendered]
chunk {14} 14.359e7567bd249deb2edc.js () 62.3 kB  [rendered]
chunk {15} 15.fd9b1099678b10590f98.js () 35.8 kB  [rendered]
chunk {16} 16.a4c51e1cdf0431bf544c.js () 54.5 kB  [rendered]
chunk {17} 17.406e88b91240a59f12c0.js () 66 kB  [rendered]
chunk {18} 18.4f7822045f92e00d1681.js () 20.2 kB  [rendered]
Date: 2020-06-30T15:12:46.392Z - Hash: a988917cd9c383ebf554 - Time: 71850ms


16:12:48.16: npm install and run build completed
------------------------------------------------------------------
16:12:50.18: Update database binding for sfcuatblue  to sfcuatdb02
------------------------------------------------------------------
16:12:52.17: Current binding for sfcuatblue already sfcuatdb02
------------------------------------------
16:12:54.17: Set variables for  sfcuatblue
------------------------------------------
16:34:27.81: Updating AWS Secrets for PREPROD/API
16:35:28.97: Updating cf variables for  sfcuatblue
16:35:38.06: Set variables for sfcuatblue completed
-----------------------------------------------------------
16:35:40.18: Update manifest.bluegreen.yml with  sfcuatblue
-----------------------------------------------------------
GIT status:
On branch live
Your branch is up to date with 'origin/live'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   manifest.bluegreen.yml

no changes added to commit (use "git add" and/or "git commit -a")
16:35:46.31: Update manifest.bluegreen.yml with sfcuatblue proceeding but current Branch is not clean
16:35:59.69: Update manifest.bluegreen.yml with sfcuatblue completed
--------------------------------------------
16:36:01.14: Push application to  sfcuatblue
--------------------------------------------
GIT status:
On branch live
Your branch is up to date with 'origin/live'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   manifest.bluegreen.yml

no changes added to commit (use "git add" and/or "git commit -a")
16:36:07.33: Push application to sfcuatblue proceeding but current Branch is not clean
Latest commit:
 
*   commit e1152da9970aa45265908a2e1757407627ac7c54
|\  Merge: 08c2fb3f 2abdcfa4
| | Author: chadtomkiss-madetech <60967748+chadtomkiss-madetech@users.noreply.github.com>
| | Date:   Tue Jun 30 15:42:41 2020 +0100
| | 
| |     Merge pull request #2280 from NMDSdevopsServiceAdm/test
| |     
| |     Test > Live
 
16:36:24.07: Checking if database patches to be applied to sfcuatdb02
Pushing from manifest to org dhsc-skills-for-care-nmds-sc-2 / space production as aaron.russell@skillsforcare.org.uk...
Using manifest file C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment\manifest.bluegreen.yml


Deprecation warning: Specifying app manifest attributes at the top level is deprecated. Found: stack.
Please see https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#deprecated for alternatives and other app manifest deprecations. This feature will be removed in the future.


Using manifest file manifest.bluegreen.yml

Using stack cflinuxfs3...
OK
Updating app sfcuatblue in org dhsc-skills-for-care-nmds-sc-2 / space production as aaron.russell@skillsforcare.org.uk...
OK

Uploading sfcuatblue...
Uploading app files from: C:\Users\arussell\Documents\Repos\ASC-WDS-Deployment
Uploading 1.5M, 1743 files
                             Done uploading
OK

Stopping app sfcuatblue in org dhsc-skills-for-care-nmds-sc-2 / space production as aaron.russell@skillsforcare.org.uk...
OK

Starting app sfcuatblue in org dhsc-skills-for-care-nmds-sc-2 / space production as aaron.russell@skillsforcare.org.uk...
Cell b89ea5ce-3ffa-4451-8225-aab039a61683 creating container for instance 0cbb1645-1767-4174-9f33-d7edaa5098dc
Cell b89ea5ce-3ffa-4451-8225-aab039a61683 successfully created container for instance 0cbb1645-1767-4174-9f33-d7edaa5098dc
Downloading app package...
Downloading build artifacts cache...
Downloaded app package (2.7M)
Downloaded build artifacts cache (61.5M)
-----> Download go 1.9.1
-----> Running go build supply
-----> Nodejs Buildpack version 1.6.32
       engines.node (package.json): 10.10.0
-----> Installing binaries
       engines.npm (package.json): 6.4.1
-----> Installing node 10.10.0
       Copy [/tmp/cache/final/dependencies/934bf15bbe7ab9c391046954a0de5bb78e4467101b6876a3887632ef920c28a4/node-10.10.0-linux-x64-cflinuxfs3-721fa3f1.tgz]
       npm 6.4.1 already installed with node
-----> Installing yarn 1.9.4
       Copy [/tmp/cache/final/dependencies/cc1e47168cd91f0aa164a9269c052cff998f9686183aaa8688e54545d8cdda4e/yarn-v1.9.4-7667eb71.tar.gz]
       Installed yarn 1.9.4
-----> Creating runtime environment
       [34;1mPRO TIP:[0m It is recommended to vendor the application's Node.js dependencies
       Visit http://docs.cloudfoundry.org/buildpacks/node/index.html#vendoring
       NODE_ENV=preproduction
       NODE_HOME=/tmp/contents848585886/deps/0/node
       NODE_MODULES_CACHE=true
       NODE_VERBOSE=false
       NPM_CONFIG_LOGLEVEL=error
       NPM_CONFIG_PRODUCTION=true
       npm scripts will see NODE_ENV=production (not 'preproduction')
       https://docs.npmjs.com/misc/config#production
-----> Building dependencies
       Installing node modules (package.json + package-lock.json)
> core-js@2.6.11 postinstall /tmp/app/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"
added 569 packages from 592 contributors and audited 2808 packages in 24.982s
found 4 low severity vulnerabilities
  run `npm audit fix` to fix them, or `npm audit` for details
-----> Running go build finalize
Exit status 0
Uploading droplet, build artifacts cache...
Uploading droplet...
Uploading build artifacts cache...
Uploaded build artifacts cache (101.2M)
Uploaded droplet (72.6M)
Uploading complete
Cell b89ea5ce-3ffa-4451-8225-aab039a61683 stopping instance 0cbb1645-1767-4174-9f33-d7edaa5098dc
Cell b89ea5ce-3ffa-4451-8225-aab039a61683 destroying container for instance 0cbb1645-1767-4174-9f33-d7edaa5098dc
Cell b89ea5ce-3ffa-4451-8225-aab039a61683 successfully destroyed container for instance 0cbb1645-1767-4174-9f33-d7edaa5098dc

0 of 10 instances running, 10 starting
9 of 10 instances running, 1 starting

App started


OK

App sfcuatblue was started using this command `npm start`

Showing health and status for app sfcuatblue in org dhsc-skills-for-care-nmds-sc-2 / space production as aaron.russell@skillsforcare.org.uk...
OK

requested state: started
instances: 10/10
usage: 8G x 10 instances
urls: sfcuatblue.cloudapps.digital
last uploaded: Tue Jun 30 15:38:00 UTC 2020
stack: cflinuxfs3
buildpack: https://github.com/cloudfoundry/nodejs-buildpack.git#v1.6.32

     state      since                    cpu    memory         disk           details
#0   running    2020-06-30 04:39:32 PM   0.0%   43.7K of 8G    8K of 4G
#1   running    2020-06-30 04:39:32 PM   0.0%   48.8M of 8G    423.8M of 4G
#2   running    2020-06-30 04:39:33 PM   0.0%   153.4M of 8G   423.8M of 4G
#3   running    2020-06-30 04:39:31 PM   0.0%   71.3M of 8G    423.8M of 4G
#4   starting   2020-06-30 04:39:21 PM   0.3%   90.4M of 8G    1.4G of 4G
#5   running    2020-06-30 04:39:33 PM   0.0%   39.8K of 8G    8K of 4G
#6   running    2020-06-30 04:39:33 PM   0.6%   131.2M of 8G   1.4G of 4G
#7   running    2020-06-30 04:39:33 PM   0.5%   87.4M of 8G    1.4G of 4G
#8   running    2020-06-30 04:39:32 PM   0.3%   103.9M of 8G   1.4G of 4G
#9   running    2020-06-30 04:39:32 PM   0.0%   39.8K of 8G    8K of 4G
16:39:43.25: Push application to sfcuatblue completed
-------------------------------------------
16:39:45.12: Create Draft Release on Github
-------------------------------------------
16:40:37.87: Publish Release to Github abandoned - user choice
==================================================================================================
16:40:46.06: PREPROD MENU: 7 selected....
-------------------------------------------
16:40:48.16: Create Draft Release on Github
-------------------------------------------
16:41:09.22: Publish Release 6.1 completed
